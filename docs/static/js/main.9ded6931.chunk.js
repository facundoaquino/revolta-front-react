(this.webpackJsonprevolta=this.webpackJsonprevolta||[]).push([[0],{33:function(e,t,n){},58:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(34),o=n.n(r),s=n(4),i=n(6),u=n(13),l=n.n(u),j=n(16),d=(n(21),Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_BASE_URL:"http://apirevolta.facuaquino.com.ar"}).REACT_APP_URL||"http://apirevolta.facuaquino.com.ar"),b=n(10),m=n(2),p=n(15),O=(n(58),n(0)),h=function(){var e=Object(a.useState)({name:"",password:""}),t=Object(i.a)(e,2),n=t[0],c=t[1],r=Object(a.useContext)(z).login,o=function(e){c(Object(s.a)(Object(s.a)({},n),{},Object(p.a)({},e.target.name,e.target.value)))};return Object(O.jsx)("div",{className:"form_container",children:Object(O.jsxs)("form",{onSubmit:function(e){e.preventDefault(),r(n)},className:"form_form",action:"",children:[Object(O.jsx)("label",{className:"form_label",htmlFor:"user",children:"Usuario"}),Object(O.jsx)("input",{onChange:o,id:"user",className:"form_input",type:"text",name:"name",required:!0}),Object(O.jsx)("label",{className:"form_label",htmlFor:"password",children:"Contrase\xf1a"}),Object(O.jsx)("input",{onChange:o,id:"password",className:"form_input",type:"password",name:"password",required:!0}),Object(O.jsx)("button",{className:"form_button",children:"Enviar"})]})})},f=(n(60),function(){return Object(O.jsx)("main",{className:"login_main",children:Object(O.jsx)(h,{})})}),v=function(){return Object(O.jsx)("div",{})},x=(n(61),n.p+"static/media/fondo.077ac129.png"),g=(n(62),function(){var e=Object(a.useContext)(z).logout;return Object(O.jsx)("li",{onClick:e,className:"logout",children:"Salir"})}),_=function(){return Object(O.jsx)("nav",{children:Object(O.jsxs)("ul",{className:"navbar",children:[Object(O.jsx)(b.b,{to:"/home",children:Object(O.jsx)("img",{className:"navbar_logo",src:x,alt:""})}),Object(O.jsx)("li",{children:Object(O.jsx)(b.c,{className:"nav_link",activeClassName:"navbar_active",to:"/home/ritmos",children:"Ritmos"})}),Object(O.jsx)("li",{children:Object(O.jsx)(b.c,{className:"nav_link",activeClassName:"navbar_active",to:"/home/upload",children:"Subir"})}),Object(O.jsx)(g,{})]})})},N=n(5),S=n.n(N),w=n(12),C=function(){var e=Object(w.a)(S.a.mark((function e(){var t,n,a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=d,e.next=3,l.a.get("".concat(t,"/api/uploads"));case 3:return n=e.sent,a=n.data,e.abrupt("return",a.folders);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=new j.a;t.error({message:e,duration:2e3})},A=["mp3","mp4","mpeg","opus","ogg"],E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.split("."),n=t[t.length-1],a=A.includes(n);return a},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(e/1024/1024>500){var t=new j.a;return t.error({message:"Archivo muy grande",duration:2e3}),!0}return!1},T=(n(33),function(e){var t=e.rhythms,n=e.hadlerChange;return Object(O.jsx)(O.Fragment,{children:Object(O.jsx)("select",{className:"upload_input",onChange:n,required:!0,name:"ritmo",id:"ritmo",children:t.map((function(e){return Object(O.jsx)("option",{value:e,children:e.toUpperCase()},e)}))})})}),F=function(){var e=Object(a.useState)({name:"",description:"",ritmo:"",archivo:""}),t=Object(i.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)([]),o=Object(i.a)(r,2),u=o[0],j=o[1],b=Object(a.useState)(0),h=Object(i.a)(b,2),f=h[0],v=h[1],x=d,g=Object(a.useState)(!1),_=Object(i.a)(g,2),N=_[0],A=_[1],F=Object(m.g)(),P=function(){var e=Object(w.a)(S.a.mark((function e(t){var a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),A(!0),e.prev=2,(a=new FormData).append("archivo",n.archivo),a.append("name",n.name),a.append("description",n.description),a.append("ritmo",n.ritmo),e.next=10,l()({url:"".concat(x,"/api/uploads/").concat(n.ritmo),method:"POST",data:a,onUploadProgress:function(e){var t=e.total,n=e.loaded,a=Math.floor(100*n/t);v(a)}});case 10:F.push("/home/ritmos/".concat(n.ritmo)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),console.log(e.t0.response);case 16:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t){return e.apply(this,arguments)}}(),R=function(e){if("archivo"===e.target.name){var t;if(console.log(e.target.files),k(null===(t=e.target.files[0])||void 0===t?void 0:t.size))return void(e.target.value="");if(1===e.target.files.length)if(!E(e.target.files[0].name))return y("Archivo no permitido , solo podes subir videos"),void(e.target.value="");c(Object(s.a)(Object(s.a)({},n),{},{archivo:e.target.files[0]}))}else c(Object(s.a)(Object(s.a)({},n),{},Object(p.a)({},e.target.name,e.target.value)))};return Object(a.useEffect)((function(){var e=function(){var e=Object(w.a)(S.a.mark((function e(){var t;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C();case 2:t=e.sent,j(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();setTimeout((function(){e()}),2e3)}),[]),Object(O.jsx)("div",{className:"upload_container",children:Object(O.jsxs)("form",{onSubmit:P,className:"upload__form",children:[Object(O.jsx)("label",{className:"upload_label",htmlFor:"name",children:"Titulo"}),Object(O.jsx)("input",{onChange:R,className:"upload_input",required:!0,id:"name",type:"text",name:"name"}),Object(O.jsx)("label",{className:"upload_label",htmlFor:"ritmo",children:"Ritmo"}),u.length>0?Object(O.jsx)(T,{rhythms:u,hadlerChange:R}):"Cargando ritmos...",Object(O.jsx)("label",{className:"upload_label",htmlFor:"description",children:"Descripcion"}),Object(O.jsx)("textarea",{onChange:R,id:"description",className:"upload_textarea",maxLength:"100",type:"text",name:"description"}),Object(O.jsx)("input",{onChange:R,className:"input_file",required:!0,type:"file",name:"archivo",accept:".mp3,.mp4,.mpeg,.opus,.ogg"}),Object(O.jsxs)("div",{className:"upload_button-container",children:[Object(O.jsx)("div",{className:"upload_button-bar",style:{width:"".concat(f,"%")}}),Object(O.jsx)("button",{disabled:N,className:"upload_button"}),Object(O.jsx)("div",{className:"upload_button-text",children:N?"Subiendo Archivo ".concat(f,"%"):"Enviar"})]})]})})},P=(n(69),n.p+"static/media/iconVideo.ea408745.png"),R=(n(70),function(){return Object(O.jsxs)("div",{className:"lds-ring",children:[Object(O.jsx)("div",{}),Object(O.jsx)("div",{}),Object(O.jsx)("div",{}),Object(O.jsx)("div",{})]})}),D=function(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(!1),o=Object(i.a)(r,2),s=o[0],u=o[1];return Object(a.useEffect)((function(){function e(){return(e=Object(w.a)(S.a.mark((function e(){var t;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(!0),e.next=3,C();case 3:t=e.sent,c(t),u(!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),s?Object(O.jsx)(R,{}):Object(O.jsx)("main",{className:"homeVideos_container",children:n.map((function(e){return Object(O.jsxs)("div",{className:"video_container-link",children:[Object(O.jsx)("img",{className:"video_icon",src:P,alt:""}),Object(O.jsx)(b.b,{className:"videos_link",to:"/home/ritmos/".concat(e),children:e},e)]},e)}))})},q=function(){var e=Object(w.a)(S.a.mark((function e(t){var n,a,c;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d,e.next=3,l.a.get("".concat(n,"/api/uploads/").concat(t));case 3:return a=e.sent,c=a.data,e.abrupt("return",c.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=(n(71),function(){var e=Object(a.useState)([]),t=Object(i.a)(e,2),n=t[0],c=t[1],r=Object(m.h)().ritmo,o=d;return Object(a.useEffect)((function(){function e(){return(e=Object(w.a)(S.a.mark((function e(){var t;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q(r);case 2:t=e.sent,c(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[r]),Object(O.jsx)("main",{className:"main_videos",children:n.map((function(e){return Object(O.jsxs)("div",{className:"video_container",children:[Object(O.jsx)("div",{className:"video_name",children:e.name}),Object(O.jsx)("p",{className:"video_description",children:e.description}),Object(O.jsx)("video",{src:"".concat(o,"/api/uploads/").concat(r,"/").concat(e.path),width:"300px",codecs:"avc1, mp4a",controls:!0})]},e.path)}))})}),I=function(){return Object(O.jsx)("div",{children:Object(O.jsxs)(m.d,{children:[Object(O.jsx)(m.b,{exact:!0,path:"/home/ritmos",component:D}),Object(O.jsx)(m.b,{path:"/home/ritmos/:ritmo",component:U})]})})},L=function(){return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(_,{}),Object(O.jsx)("div",{className:"container",children:Object(O.jsxs)(m.d,{children:[Object(O.jsx)(m.b,{exact:!0,path:"/home",component:v}),Object(O.jsx)(m.b,{exact:!0,path:"/home/upload",component:F}),Object(O.jsx)(m.b,{path:"/home/ritmos",component:I})]})})]})},B=n(18),H=["isAutheticated","component"],J=function(e){var t=e.isAutheticated,n=e.component,a=Object(B.a)(e,H);return Object(O.jsx)(m.b,Object(s.a)(Object(s.a)({},a),{},{component:function(e){return t?Object(O.jsx)(n,Object(s.a)({},e)):Object(O.jsx)(m.a,{to:"/"})}}))},K=["isAutheticated","component"],V=function(e){var t=e.isAutheticated,n=e.component,a=Object(B.a)(e,K);return Object(O.jsx)(m.b,Object(s.a)(Object(s.a)({},a),{},{component:function(e){return t?Object(O.jsx)(m.a,{to:"/home"}):Object(O.jsx)(n,Object(s.a)({},e))}}))},W=function(){var e=Object(a.useContext)(z).user;return Object(O.jsx)(b.a,{children:Object(O.jsx)("div",{children:Object(O.jsxs)(m.d,{children:[Object(O.jsx)(J,{path:"/home",component:L,isAutheticated:e.logged}),Object(O.jsx)(V,{exact:!0,path:"/",component:f,isAutheticated:e.logged})]})})})},z=c.a.createContext(),M=JSON.parse(localStorage.getItem("login"))||!1,G=function(){var e=Object(a.useState)({logged:M}),t=Object(i.a)(e,2),n=t[0],c=t[1],r=d;return Object(O.jsx)(z.Provider,{value:{user:n,login:function(e){l.a.post("".concat(r,"/api/users/login"),Object(s.a)({},e)).then((function(e){localStorage.setItem("login",!0),c({logged:!0})})).catch((function(e){e.response;(new j.a).error({message:"usuario a pass incorrecta",duration:1500})}))},logout:function(){localStorage.removeItem("login"),c({logged:!1})}},children:Object(O.jsx)(W,{})})},Q=(n(72),function(){return Object(O.jsx)(G,{})});o.a.render(Object(O.jsx)(Q,{}),document.getElementById("root"))}},[[73,1,2]]]);
//# sourceMappingURL=main.9ded6931.chunk.js.map